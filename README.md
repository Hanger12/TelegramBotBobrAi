# Telegram Weather Bot

## Описание

Этот проект представляет собой Telegram-бота, который предоставляет информацию о погоде в заданном городе. Бот разработан в рамках тестового задания для компании **BobrAi**. Он взаимодействует с Telegram Bot API и использует внешний API для получения данных о погоде.

## Функциональные возможности

### Команда `/weather`

- Принимает команду `/weather <город>`, чтобы вернуть текущую погоду в указанном городе.
- Если город не указан или указан неверно, бот выводит сообщение об ошибке.
- `/start`-запускается приветствие бота
- `/setcity <город>` - сохранение пользовательских настроек (город по умолчанию)

### Интеграция с API погоды

- Использует API **OpenWeatherMap** для получения следующей информации:
  - Температура.
  - Ощущаемая температура.
  - Описание погоды (например, "ясно", "дождь").
  - Влажность.
  - Скорость ветра.

### Логирование запросов

- Все запросы к боту логируются в базу данных **PostgreSQL**.
- Логи содержат:
  - ID пользователя.
  - Команду, которую отправил пользователь.
  - Дата и время запроса.
  - Ответ бота.

### REST API для просмотра истории запросов

- Реализовано REST API для получения истории запросов пользователей.
- Эндпоинты:
  - **GET** `/logs`: возвращает список всех запросов.
  - **GET** `/logs/{user_id}`: возвращает запросы конкретного пользователя.
- Поддержка пагинации и фильтрации по времени запроса.

## Установка и запуск
### Необходимые зависимости

1. **Docker**: Убедитесь, что Docker установлен на вашем компьютере.
2. **Docker Compose**: Убедитесь, что Docker Compose установлен.

3. Клонируйте репозиторий:

   ```bash
   git clone https://github.com/Hanger12/TelegramBotBobrAi.git
   ```
4. Создайте и активируйте виртуальное окружение:
    ```bash
    python -m venv venv
    source venv/bin/activate  # Для Linux/Mac
    venv\Scripts\activate     # Для Windows
   ```
5. Настройте переменные окружения:
```bash
    Создайте файл .env и добавьте следующие переменные:
    
    TELEGRAM_TOKEN=ваш_токен_бота
    OPENWEATHERMAP_API_KEY=ваш_ключ_API_погоды
   ```
6. Выполните команду:
```bash
    docker-compose up --build
   ```
7. RestAPI будет доступно по адресу:
```bash
    http://localhost:5083/logs/
    или
    http://localhost:5083/logs/<int:user_id>
   ```
8. Swagger по API доступен по адресу:
```bash
    http://localhost:5083/apidocs/
   ```